# Snakemake 8+ workflow profile for sm-calling
# This is the --workflow-profile (ships with the repo).
# Cluster-specific settings (executor, account, partition) go in
# a separate --profile (e.g., profiles/bih/ or profiles/charite/).

latency-wait: 60
jobs: 20
rerun-incomplete: true
printshellcmds: true
software-deployment-method:
  - conda

# Shared filesystem assumptions (typical HPC with Lustre/GPFS/NFS)
shared-fs-usage:
  - persistence
  - software-deployment
  - sources
  - source-cache
  - input-output

default-resources:
  mem_mb: 4000
  runtime: 120

set-threads:
  mutect2_call: 4
  gather_mutect2_vcfs: 4
  merge_mutect2_stats: 4
  learn_read_orientation: 4
  get_pileup_summaries: 4
  calculate_contamination: 4
  filter_mutect_calls: 4
  freebayes_call: 2
  merge_freebayes_vcfs: 12
  scatter_intervals_by_ns: 1
  split_intervals: 4
  bcftools_stats_mutect2: 1
  bcftools_stats_freebayes: 1
  multiqc: 1
  purecn_coverage: 1
  purecn_normaldb: 1
  purecn_run: 1

set-resources:
  mutect2_call:
    mem_mb: 17600
    runtime: 4320
  gather_mutect2_vcfs:
    mem_mb: 17600
    runtime: 1440
  merge_mutect2_stats:
    mem_mb: 8000
    runtime: 720
  learn_read_orientation:
    mem_mb: 17600
    runtime: 1440
  get_pileup_summaries:
    mem_mb: 17600
    runtime: 4320
  calculate_contamination:
    mem_mb: 17600
    runtime: 1440
  filter_mutect_calls:
    mem_mb: 17600
    runtime: 1440
  freebayes_call:
    mem_mb: 16384
    runtime: 4320
  merge_freebayes_vcfs:
    mem_mb: 16384
    runtime: 1440
  bcftools_stats_mutect2:
    mem_mb: 4000
    runtime: 120
  bcftools_stats_freebayes:
    mem_mb: 4000
    runtime: 120
  multiqc:
    mem_mb: 4000
    runtime: 120
  purecn_coverage:
    mem_mb: 8000
    runtime: 720
  purecn_normaldb:
    mem_mb: 16384
    runtime: 1440
  purecn_run:
    mem_mb: 16384
    runtime: 2880
